{"version":3,"sources":["llms-metaboxes.js"],"names":["$","fn","llmsCollapsible","this","on","$parent","closest","$siblings","siblings","toggleClass","trigger","find","slideToggle","each","removeClass","slideUp","window","llms","Metaboxes","repeaters","metaboxes","$repeaters","init","self","length","LLMS","wait_for","tinyMCE","load","bind","attr","handle_submit","$repeater","$rows","$model","EditorManager","execCommand","add_row","sortable","handle","items","start","event","ui","addClass","stop","$eds","item","ed_id","save","e","stopPropagation","$row","confirm","l10n","translate","remove","setTimeout","data","expand","clone","new_index","editor","reindex","key","val","$field","hasClass","i","append","title","bind_row","bind_row_header","llmsSelect2","width","llmsStudentsSelect2","bind_datepickers","bind_controllers","$title","text","$btn","$spinner","parent","is","removeAttr","preventDefault","wait","setInterval","clearInterval","off","store","obj","index","replace_attr","$el","str","replace","old_index","$ed","serialize","rows","name","editors","getContent","push","action","cb","store_action","Ajax","call","beforeSend","Spinner","success","r","post_select","bind_tabs","bindings","selector","func","$selector","reduced","filter","post","post_type","bind_cb_controllers","$controllers","$cb","$controlled","slideDown","possible","vals","indexOf","split","bind_datepicker","format","maxDate","minDate","datepicker","dateFormat","$datepickers","bind_editables","make_editable","$input","$label","type","required","selected","options","JSON","parse","min_date","max_date","$picker","date","hour","minute","empty","$fields","bind_llms_engagement","engagement_type","$select","cpt","bind_llms_membership","toggle_header_row","$table","first","show","hide","get_course_ids","courses","$container","course_id","fadeOut","prepend","message","replaceWith","id","alert","%s","$tr","admin_url","error","jqxhr","code","error_msg","complete","bind_llms_order","txn_id","refundable_amount","gateway_supports","gateway_title","$new_row","$gateway_btn","after","next","one","gateway","gateway_data","field","$wrap","enabled","bind_merge_code_buttons","$wrappers","target","tinymce","insertContent","$metabox","tab_id","multi","llmsPostsSelect2","msg","bind_tables","jQuery"],"mappings":"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","file":"../../js/llms-metaboxes.min.js","sourcesContent":["/****************************************************************\n *\n * Contributor's Notice\n * \n * This is a compiled file and should not be edited directly!\n * The uncompiled script is located in the \"assets/private\" directory\n * \n ****************************************************************/\n\n/**\n * LifterLMS Admin Panel Metabox Functions\n *\n * @since 3.0.0\n * @since 3.30.0 Made autoenroll table sortable, added AJAX save for adding new courses.\n * @version 3.30.0\n */\n( function( $ ) {\n\n\t/**\n\t * jQuery plugin to allow \"collapsible\" sections\n\t *\n\t * @return  jQuery object\n\t * @since   3.0.0\n\t * @version 3.29.0\n\t */\n\t$.fn.llmsCollapsible = function() {\n\n\t\tvar $group = this;\n\n\t\tthis.on( 'click', '.llms-collapsible-header', function() {\n\n\t\t\tvar $parent   = $( this ).closest( '.llms-collapsible' ),\n\t\t\t\t$siblings = $parent.siblings( '.llms-collapsible' );\n\n\t\t\t$parent.toggleClass( 'opened' ).trigger( 'llms-collapsible-toggled' );\n\n\t\t\t$parent.find( '.llms-collapsible-body' ).slideToggle( 400 );\n\n\t\t\t$siblings.each( function() {\n\t\t\t\t$( this ).removeClass( 'opened' );\n\t\t\t\t$( this ).find( '.llms-collapsible-body' ).slideUp( 400 );\n\t\t\t} );\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\twindow.llms = window.llms || {};\n\n\tvar Metaboxes = function() {\n\n\t\t/**\n\t\t * load all partials\n\t\t */\n\t\t/**\n\t\t * LifterLMS Admin Metabox Repeater Field\n\t\t *\n\t\t * @package LifterLMS/Scripts/Partials\n\t\t *\n\t\t * @since    3.11.0\n\t\t * @version  3.23.0\n\t\t */\n\t\t\n\t\tthis.repeaters = {\n\t\t\n\t\t\t/**\n\t\t\t * Reference to the parent metabox class\n\t\t\t *\n\t\t\t * @type  obj\n\t\t\t */\n\t\t\tmetaboxes: this,\n\t\t\n\t\t\t/**\n\t\t\t * A jQuery selector for all repeater elements on the current screen\n\t\t\t *\n\t\t\t * @type  {[type]}\n\t\t\t */\n\t\t\t$repeaters: null,\n\t\t\n\t\t\t/**\n\t\t\t * Init\n\t\t\t *\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.23.0\n\t\t\t *\n\t\t\t * @return   void\n\t\t\t */\n\t\t\tinit: function() {\n\t\t\n\t\t\t\tvar self = this;\n\t\t\n\t\t\t\tself.$repeaters = $( '.llms-mb-list.repeater' );\n\t\t\n\t\t\t\tif ( self.$repeaters.length ) {\n\t\t\n\t\t\t\t\t// wait for tinyMCE just in case their editors in the repeaters\n\t\t\t\t\tLLMS.wait_for(\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\treturn ( 'undefined' !== typeof tinyMCE );\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tself.load();\n\t\t\t\t\t\t\tself.bind();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\n\t\t\t\t\t// on click of any post submit buttons add some data to the submit button\n\t\t\t\t\t// so we can see which button to trigger after repeaters are finished\n\t\t\t\t\t$( '#post input[type=\"submit\"], #post-preview' ).on( 'click', function() {\n\t\t\t\t\t\t$( this ).attr( 'data-llms-clicked', 'yes' );\n\t\t\t\t\t} );\n\t\t\n\t\t\t\t\t// handle post submission\n\t\t\t\t\t$( '#post' ).on( 'submit', self.handle_submit );\n\t\t\n\t\t\t\t}\n\t\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Bind DOM Events\n\t\t\t *\n\t\t\t * @return   void\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.13.0\n\t\t\t */\n\t\t\tbind: function() {\n\t\t\n\t\t\t\tvar self = this;\n\t\t\n\t\t\t\tself.$repeaters.each( function() {\n\t\t\n\t\t\t\t\tvar $repeater = $( this ),\n\t\t\t\t\t\t$rows     = $repeater.find( '.llms-repeater-rows' ),\n\t\t\t\t\t\t$model    = $repeater.find( '.llms-repeater-model' );\n\t\t\n\t\t\t\t\ttinyMCE.EditorManager.execCommand( 'mceRemoveEditor', true, $model.find( '.llms-mb-list.editor textarea' ).attr( 'id' ) );\n\t\t\n\t\t\t\t\t// for the repeater + button\n\t\t\t\t\t$repeater.find( '.llms-repeater-new-btn' ).on( 'click', function() {\n\t\t\t\t\t\tself.add_row( $repeater, null, true );\n\t\t\t\t\t} );\n\t\t\n\t\t\t\t\t// make repeater rows sortable\n\t\t\t\t\t$rows.sortable( {\n\t\t\t\t\t\thandle: '.llms-drag-handle',\n\t\t\t\t\t\titems: '.llms-repeater-row',\n\t\t\t\t\t\tstart: function( event, ui ) {\n\t\t\t\t\t\t\t$rows.addClass( 'dragging' );\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstop: function( event, ui ) {\n\t\t\t\t\t\t\t$rows.removeClass( 'dragging' );\n\t\t\n\t\t\t\t\t\t\tvar $eds = ui.item.find( 'textarea.wp-editor-area' );\n\t\t\t\t\t\t\t$eds.each( function() {\n\t\t\t\t\t\t\t\tvar ed_id = $( this ).attr( 'id' );\n\t\t\t\t\t\t\t\ttinyMCE.EditorManager.execCommand( 'mceRemoveEditor', true, ed_id );\n\t\t\t\t\t\t\t\ttinyMCE.EditorManager.execCommand( 'mceAddEditor', true, ed_id );\n\t\t\t\t\t\t\t} );\n\t\t\n\t\t\t\t\t\t\tself.save( $repeater );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\n\t\t\t\t\t$repeater.on( 'click', '.llms-repeater-remove', function( e ) {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tvar $row = $( this ).closest( '.llms-repeater-row' );\n\t\t\t\t\t\tif ( window.confirm( LLMS.l10n.translate( 'Are you sure you want to delete this row? This cannot be undone.' ) ) ) {\n\t\t\t\t\t\t\t$row.remove();\n\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\tself.save( $repeater );\n\t\t\t\t\t\t\t}, 1 );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\n\t\t\t\t} );\n\t\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Add a new row to a repeater rows group\n\t\t\t *\n\t\t\t * @param    obj    $repeater  jQuery selector for the repeater to add a row to\n\t\t\t * @param    obj    data       optional object of data to fill fields in the row with\n\t\t\t * @param    bool   expand     if true, will automatically open the row after adding it to the dom\n\t\t\t * @return \t void\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.11.0\n\t\t\t */\n\t\t\tadd_row: function( $repeater, data, expand ) {\n\t\t\n\t\t\t\tvar self      = this,\n\t\t\t\t\t$rows     = $repeater.find( '.llms-repeater-rows' ),\n\t\t\t\t\t$model    = $repeater.find( '.llms-repeater-model' ),\n\t\t\t\t\t$row      = $model.find( '.llms-repeater-row' ).clone(),\n\t\t\t\t\tnew_index = $repeater.find( '.llms-repeater-row' ).length,\n\t\t\t\t\teditor    = self.reindex( $row, new_index );\n\t\t\n\t\t\t\tif ( data ) {\n\t\t\t\t\t$.each( data, function( key, val ) {\n\t\t\n\t\t\t\t\t\tvar $field = $row.find( '[name^=\"' + key + '\"]' );\n\t\t\n\t\t\t\t\t\tif ( $field.hasClass( 'llms-select2-student' ) ) {\n\t\t\t\t\t\t\t$.each( val, function( i, data ) {\n\t\t\t\t\t\t\t\t$field.append( '<option value=\"' + data.key + '\" selected=\"selected\">' + data.title + '</option>' )\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t$field.trigger( 'change' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$field.val( val );\n\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tself.bind_row( $row );\n\t\t\t\t}, 1 );\n\t\t\n\t\t\t\t$rows.append( $row );\n\t\t\t\tif ( expand ) {\n\t\t\t\t\t$row.find( '.llms-collapsible-header' ).trigger( 'click' );\n\t\t\t\t}\n\t\t\t\ttinyMCE.EditorManager.execCommand( 'mceAddEditor', true, editor );\n\t\t\n\t\t\t\t$repeater.trigger( 'llms-new-repeater-row', {\n\t\t\t\t\t$row: $row,\n\t\t\t\t\tdata: data,\n\t\t\t\t} );\n\t\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Bind DOM events for a single repeater row\n\t\t\t *\n\t\t\t * @param    obj   $row  jQuery selector for the row\n\t\t\t * @return   void\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.13.0\n\t\t\t */\n\t\t\tbind_row: function( $row ) {\n\t\t\n\t\t\t\tthis.bind_row_header( $row );\n\t\t\n\t\t\t\t$row.find( '.llms-select2' ).llmsSelect2( {\n\t\t\t\t\twidth: '100%',\n\t\t\t\t} );\n\t\t\n\t\t\t\t$row.find( '.llms-select2-student' ).llmsStudentsSelect2();\n\t\t\n\t\t\t\tthis.metaboxes.bind_datepickers( $row.find( '.llms-datepicker' ) );\n\t\t\t\tthis.metaboxes.bind_controllers( $row.find( '[data-is-controller]' ) );\n\t\t\t\t// this.metaboxes.bind_merge_code_buttons( $row.find( '.llms-merge-code-wrapper' ) );\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Bind row header events\n\t\t\t *\n\t\t\t * @param    obj   $row  jQuery selector for the row\n\t\t\t * @return   void\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.11.0\n\t\t\t */\n\t\t\tbind_row_header: function( $row ) {\n\t\t\n\t\t\t\t// handle the title field binding\n\t\t\t\tvar $title = $row.find( '.llms-repeater-title' ),\n\t\t\t\t\t$field = $row.find( '.llms-collapsible-header-title-field' );\n\t\t\n\t\t\t\t$title.attr( 'data-default', $title.text() );\n\t\t\n\t\t\t\t$field.on( 'keyup focusout blur', function() {\n\t\t\t\t\tvar val = $( this ).val();\n\t\t\t\t\tif ( ! val ) {\n\t\t\t\t\t\tval = $title.attr( 'data-default' );\n\t\t\t\t\t}\n\t\t\t\t\t$title.text( val );\n\t\t\t\t} ).trigger( 'keyup' );\n\t\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Handle WP Post form submission to ensure repeaters are saved before submitting the form to save/publish the post\n\t\t\t *\n\t\t\t * @param    obj   e  JS event object\n\t\t\t * @return   void\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.23.0\n\t\t\t */\n\t\t\thandle_submit: function( e ) {\n\t\t\n\t\t\t\t// get the button used to submit the form\n\t\t\t\tvar $btn     = $( '#post [data-llms-clicked=\"yes\"]' ),\n\t\t\t\t\t$spinner = $btn.parent().find( '.spinner' );\n\t\t\n\t\t\t\tif ( $btn.is( '#post-preview' ) ) {\n\t\t\t\t\t$btn.removeAttr( 'data-llms-clicked' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\n\t\t\t\te.preventDefault();\n\t\t\n\t\t\t\t// core UX to prevent multi-click/or the appearance of a delay\n\t\t\t\t$( '#post input[type=\"submit\"]' ).addClass( 'disabled' ).attr( 'disabled', 'disabled' );\n\t\t\t\t$spinner.addClass( 'is-active' );\n\t\t\n\t\t\t\tvar self = window.llms.metaboxes.repeaters,\n\t\t\t\t\ti    = 0,\n\t\t\t\t\twait;\n\t\t\n\t\t\t\tself.$repeaters.each( function() {\n\t\t\t\t\tself.save( $( this ) );\n\t\t\t\t} );\n\t\t\n\t\t\t\twait = setInterval( function() {\n\t\t\n\t\t\t\t\tif ( i >= 59 || ! $( '.llms-mb-list.repeater.processing' ).length ) {\n\t\t\n\t\t\t\t\t\tclearInterval( wait );\n\t\t\t\t\t\t$( '#post' ).off( 'submit', this.handle_submit );\n\t\t\t\t\t\t$spinner.removeClass( 'is-active' );\n\t\t\t\t\t\t$btn.removeClass( 'disabled' ).removeAttr( 'disabled' ).trigger( 'click' );\n\t\t\n\t\t\t\t\t} else {\n\t\t\n\t\t\t\t\t\ti++;\n\t\t\n\t\t\t\t\t}\n\t\t\n\t\t\t\t}, 1000 );\n\t\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Load repeater data from the server and create rows in the DOM\n\t\t\t *\n\t\t\t * @return   void\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.12.1\n\t\t\t */\n\t\t\tload: function() {\n\t\t\n\t\t\t\tvar self = this;\n\t\t\n\t\t\t\tself.$repeaters.each( function() {\n\t\t\n\t\t\t\t\tvar $repeater = $( this );\n\t\t\n\t\t\t\t\t// ensure the repeater is only loaded once to prevent duplicates resulting from duplicating binding\n\t\t\t\t\t// on certain sites which I cannot quite explain...\n\t\t\t\t\tif ( $repeater.hasClass( 'is-loaded' ) || $repeater.hasClass( 'processing' ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\tself.store( $repeater, 'load', function( data ) {\n\t\t\n\t\t\t\t\t\t$repeater.addClass( 'is-loaded' );\n\t\t\n\t\t\t\t\t\t$.each( data.data, function( i, obj ) {\n\t\t\t\t\t\t\tself.add_row( $repeater, obj, false );\n\t\t\t\t\t\t} );\n\t\t\n\t\t\t\t\t\t// for each row within the repeater\n\t\t\t\t\t\t$repeater.find( '.llms-repeater-rows .llms-repeater-row' ).each( function() {\n\t\t\t\t\t\t\tself.bind_row( $( this ) );\n\t\t\t\t\t\t} );\n\t\t\n\t\t\t\t\t} );\n\t\t\n\t\t\t\t} );\n\t\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Reindex a row\n\t\t\t * renames ids, attrs, and etc...\n\t\t\t * Used when cloning the model for new rows\n\t\t\t *\n\t\t\t * @param    obj          $row  jQuery selector for the row\n\t\t\t * @param    int|string   index  index (or id) to use when renaming\n\t\t\t * @return   string\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.11.0\n\t\t\t */\n\t\t\treindex: function( $row, index ) {\n\t\t\n\t\t\t\tvar old_index = $row.attr( 'data-row-order' ),\n\t\t\t\t\t$ed       = $row.find( '.llms-mb-list.editor textarea' );\n\t\t\n\t\t\t\ttinyMCE.EditorManager.execCommand( 'mceRemoveEditor', true, $ed.attr( 'id' ) );\n\t\t\n\t\t\t\tfunction replace_attr( $el, attr ) {\n\t\t\t\t\t$el.each( function() {\n\t\t\t\t\t\tvar str = $( this ).attr( attr );\n\t\t\t\t\t\t$( this ).attr( attr, str.replace( old_index, index ) );\n\t\t\t\t\t} );\n\t\t\t\t};\n\t\t\n\t\t\t\t$row.attr( 'data-row-order', index );\n\t\t\n\t\t\t\treplace_attr( $row, 'data-row-order' );\n\t\t\n\t\t\t\treplace_attr( $row.find( 'button.insert-media' ), 'data-editor' );\n\t\t\n\t\t\t\treplace_attr( $row.find( 'input[name^=\"_llms\"], textarea[name^=\"_llms\"], select[name^=\"_llms\"]' ), 'id' );\n\t\t\t\treplace_attr( $row.find( 'input[name^=\"_llms\"], textarea[name^=\"_llms\"], select[name^=\"_llms\"]' ), 'name' );\n\t\t\t\treplace_attr( $row.find( '[data-controller]' ), 'data-controller' );\n\t\t\t\treplace_attr( $row.find( '[data-controller]' ), 'data-controller' );\n\t\t\t\treplace_attr( $row.find( 'button.wp-switch-editor' ), 'data-wp-editor-id' );\n\t\t\t\treplace_attr( $row.find( 'button.wp-switch-editor' ), 'id' );\n\t\t\t\treplace_attr( $row.find( '.wp-editor-tools' ), 'id' );\n\t\t\t\treplace_attr( $row.find( '.wp-editor-container' ), 'id' );\n\t\t\n\t\t\t\treturn $ed.attr( 'id' );\n\t\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Save a single repeaters data to the server\n\t\t\t *\n\t\t\t * @param    obj   $repeater  jQuery selector for a repeater element\n\t\t\t * @return   void\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.13.0\n\t\t\t */\n\t\t\tsave: function( $repeater ) {\n\t\t\t\t$repeater.trigger( 'llms-repeater-before-save', { $el: $repeater } );\n\t\t\t\tthis.store( $repeater, 'save' );\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Convert a repeater element into an array of objects that can be saved to the database\n\t\t\t *\n\t\t\t * @param    obj   $repeater  jQuery selector for a repeater element\n\t\t\t * @return   void\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.11.0\n\t\t\t */\n\t\t\tserialize: function( $repeater ) {\n\t\t\n\t\t\t\tvar rows = [];\n\t\t\n\t\t\t\t$repeater.find( '.llms-repeater-rows .llms-repeater-row' ).each( function() {\n\t\t\n\t\t\t\t\tvar obj = {};\n\t\t\n\t\t\t\t\t// easy...\n\t\t\t\t\t$( this ).find( 'input[name^=\"_llms\"], select[name^=\"_llms\"]' ).each( function() {\n\t\t\t\t\t\tobj[ $( this ).attr( 'name' ) ] = $( this ).val();\n\t\t\t\t\t} );\n\t\t\n\t\t\t\t\t// check if the textarea is a tinyMCE instance\n\t\t\t\t\t$( this ).find( 'textarea[name^=\"_llms\"]' ).each( function() {\n\t\t\n\t\t\t\t\t\tvar name = $( this ).attr( 'name' );\n\t\t\n\t\t\t\t\t\t// if it is an editor\n\t\t\t\t\t\tif ( tinyMCE.editors[ name ] ) {\n\t\t\t\t\t\t\tobj[ name ] = tinyMCE.editors[ name ].getContent();\n\t\t\t\t\t\t\t// grab the val of the textarea\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tobj[ name ] = $( this ).val();\n\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t} );\n\t\t\n\t\t\t\t\trows.push( obj );\n\t\t\n\t\t\t\t} );\n\t\t\n\t\t\t\treturn rows;\n\t\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * AJAX method for interacting with the repeater's handler on the server\n\t\t\t *\n\t\t\t * @param    obj       $repeater  jQuery selector for the repeater element\n\t\t\t * @param    string    action     action to call [save|load]\n\t\t\t * @param    function  cb         callback function\n\t\t\t * @return   void\n\t\t\t * @since    3.11.0\n\t\t\t * @version  3.11.0\n\t\t\t */\n\t\t\tstore: function( $repeater, action, cb ) {\n\t\t\n\t\t\t\tcb       = cb || function(){};\n\t\t\t\tvar self = this,\n\t\t\t\t\tdata = {\n\t\t\t\t\t\taction: $repeater.find( '.llms-repeater-field-handler' ).val(),\n\t\t\t\t\t\tstore_action: action,\n\t\t\t\t};\n\t\t\n\t\t\t\tif ( 'save' === action ) {\n\t\t\t\t\tdata.rows = self.serialize( $repeater );\n\t\t\t\t}\n\t\t\n\t\t\t\tLLMS.Ajax.call( {\n\t\t\t\t\tdata: data,\n\t\t\t\t\tbeforeSend: function() {\n\t\t\n\t\t\t\t\t\t$repeater.addClass( 'processing' );\n\t\t\t\t\t\tLLMS.Spinner.start( $repeater );\n\t\t\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function( r ) {\n\t\t\n\t\t\t\t\t\tcb( r );\n\t\t\t\t\t\tLLMS.Spinner.stop( $repeater );\n\t\t\t\t\t\t$repeater.removeClass( 'processing' );\n\t\t\n\t\t\t\t\t}\n\t\t\n\t\t\t\t} );\n\t\t\n\t\t\t}\n\t\t\n\t\t};\n\t\tthis.repeaters.init();\n\t\t\n\n\t\t/**\n\t\t * Initialize\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.0.0\n\t\t * @version  3.13.0\n\t\t */\n\t\tthis.init = function() {\n\n\t\t\tvar self = this;\n\n\t\t\t$( '.llms-select2-post' ).each( function() {\n\t\t\t\tself.post_select( $( this ) );\n\t\t\t} );\n\n\t\t\t$( '.llms-collapsible-group' ).llmsCollapsible();\n\n\t\t\tthis.bind_tabs();\n\n\t\t\t// bind everything better and less repetitively...\n\t\t\tvar bindings = [\n\t\t\t\t{\n\t\t\t\t\tselector: $( '.llms-datepicker' ),\n\t\t\t\t\tfunc: 'bind_datepickers',\n\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tselector: $( '.llms-select2' ),\n\t\t\t\t\tfunc: function( $selector ) {\n\t\t\t\t\t\t$selector.llmsSelect2( {\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tselector: $( '.llms-select2-student' ),\n\t\t\t\t\tfunc: function( $selector ) {\n\t\t\t\t\t\t$selector.llmsStudentsSelect2();\n\t\t\t\t\t}\n\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tselector: $( 'input[type=\"checkbox\"][data-controls]' ),\n\t\t\t\t\tfunc: 'bind_cb_controllers',\n\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tselector: $( '[data-is-controller]' ),\n\t\t\t\t\tfunc: 'bind_controllers',\n\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tselector: $( '.llms-table' ),\n\t\t\t\t\tfunc: 'bind_tables',\n\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tselector: $( '.llms-merge-code-wrapper' ),\n\t\t\t\t\tfunc: 'bind_merge_code_buttons',\n\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tselector: $( 'a.llms-editable' ),\n\t\t\t\t\tfunc: 'bind_editables',\n\t\t\t},\n\t\t\t];\n\n\t\t\t// bind all the bindables but don't bind things in repeaters\n\t\t\t$.each( bindings, function( index, obj ) {\n\n\t\t\t\tif ( obj.selector.length ) {\n\n\t\t\t\t\t// reduce the selector to exclude items in a repeater\n\t\t\t\t\tvar reduced = obj.selector.filter( function() {\n\t\t\t\t\t\treturn ( 0 === $( this ).closest( '.llms-repeater-model' ).length );\n\t\t\t\t\t} );\n\n\t\t\t\t\t// bind by string\n\t\t\t\t\tif ( 'string' === typeof obj.func ) {\n\t\t\t\t\t\tself[ obj.func ]( reduced );\n\t\t\t\t\t}\n\t\t\t\t\t// bind by an anonymous function\n\t\t\t\t\telse if ( 'function' === typeof obj.func ) {\n\t\t\t\t\t\tobj.func( reduced );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t// if a post type is set & a bind exists for it, bind it\n\t\t\tif ( window.llms.post.post_type ) {\n\n\t\t\t\tvar func = 'bind_' + window.llms.post.post_type;\n\n\t\t\t\tif ( 'function' === typeof this[func] ) {\n\n\t\t\t\t\tthis[func]();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\t/**\n\t\t * Bind checkboxes that control the display of other elements\n\t\t *\n\t\t * @param    obj   $controllers  jQuery selector for checkboxes to be bound as checkbox controllers\n\t\t * @return   void\n\t\t * @since    3.0.0\n\t\t * @version  3.11.0\n\t\t */\n\t\tthis.bind_cb_controllers = function( $controllers ) {\n\n\t\t\t$controllers = $controllers || $( 'input[type=\"checkbox\"][data-controls]' );\n\n\t\t\t$controllers.each( function() {\n\n\t\t\t\tvar $cb         = $( this ),\n\t\t\t\t\t$controlled = $( $cb.attr( 'data-controls' ) ).closest( '.llms-mb-list' );\n\n\t\t\t\t$cb.on( 'change', function() {\n\n\t\t\t\t\tif ( $( this ).is( ':checked' ) ) {\n\n\t\t\t\t\t\t$controlled.slideDown( 200 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t$controlled.slideUp( 200 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\t$cb.trigger( 'change' );\n\n\t\t\t} );\n\n\t\t};\n\n\t\t/**\n\t\t * Bind elements that control the display of other elements\n\t\t *\n\t\t * @param    obj   $controllers  jQuery selector for elements to be bound as checkbox controllers\n\t\t * @return   void\n\t\t * @since    3.0.0\n\t\t * @version  3.11.0\n\t\t */\n\t\tthis.bind_controllers = function( $controllers ) {\n\n\t\t\t$controllers = $controllers || $( '[data-is-controller]' );\n\n\t\t\t$controllers.each( function() {\n\n\t\t\t\tvar $el         = $( this ),\n\t\t\t\t\t$controlled = $( '[data-controller=\"#' + $el.attr( 'id' ) + '\"]' ),\n\t\t\t\t\tval;\n\n\t\t\t\t$el.on( 'change', function() {\n\n\t\t\t\t\tif ( 'checkbox' === $el.attr( 'type' ) ) {\n\n\t\t\t\t\t\tval = $el.is( ':checked' ) ? $el.val() : 'false';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tval = $el.val();\n\n\t\t\t\t\t}\n\n\t\t\t\t\t$controlled.each( function() {\n\n\t\t\t\t\t\tvar possible = $( this ).attr( 'data-controller-value' ),\n\t\t\t\t\t\t\tvals     = [];\n\n\t\t\t\t\t\tif ( -1 !== possible.indexOf( ',' ) ) {\n\n\t\t\t\t\t\t\tvals = possible.split( ',' );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvals.push( possible );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( -1 !== vals.indexOf( val ) ) {\n\n\t\t\t\t\t\t\t$( this ).slideDown( 200 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t$( this ).slideUp( 200 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t\t$el.trigger( 'change' );\n\n\t\t\t} );\n\n\t\t};\n\n\t\t/**\n\t\t * Bind a single datepicker element\n\t\t *\n\t\t * @param    obj   $el  jQuery selector for the input to bind the datepicker to\n\t\t * @return   void\n\t\t * @since    3.0.0\n\t\t * @version  3.10.0\n\t\t */\n\t\tthis.bind_datepicker = function( $el ) {\n\t\t\tvar format  = $el.attr( 'data-format' ) || 'mm/dd/yy',\n\t\t\t\tmaxDate = $el.attr( 'data-max-date' ) || null,\n\t\t\t\tminDate = $el.attr( 'data-min-date' ) || null;\n\t\t\t$el.datepicker( {\n\t\t\t\tdateFormat: format,\n\t\t\t\tmaxDate: maxDate,\n\t\t\t\tminDate: minDate,\n\t\t\t} );\n\t\t}\n\n\t\t/**\n\t\t * Bind all LifterLMS datepickers\n\t\t *\n\t\t * @param    obj   $datepickers  jQuery selector for the elements to bind\n\t\t * @return   void\n\t\t * @since    3.0.0\n\t\t * @version  3.11.0\n\t\t */\n\t\tthis.bind_datepickers = function( $datepickers ) {\n\n\t\t\tvar self = this;\n\n\t\t\t$datepickers = $datepickers || $( '.llms-datepicker' );\n\n\t\t\t$datepickers.each( function() {\n\t\t\t\tself.bind_datepicker( $( this ) );\n\t\t\t} );\n\n\t\t};\n\n\t\t/**\n\t\t * Bind llms-editable metabox fields and related dom interactions\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.10.0\n\t\t * @version  3.28.0\n\t\t */\n\t\tthis.bind_editables = function() {\n\n\t\t\tvar self = this;\n\n\t\t\tfunction make_editable( $field ) {\n\n\t\t\t\tvar $label   = $field.find( 'label' ).clone(),\n\t\t\t\t\tname     = $field.attr( 'data-llms-editable' ),\n\t\t\t\t\ttype     = $field.attr( 'data-llms-editable-type' ),\n\t\t\t\t\trequired = $field.attr( 'data-llms-editable-required' ) || 'no',\n\t\t\t\t\tval      = $field.attr( 'data-llms-editable-value' ),\n\t\t\t\t\t$input;\n\n\t\t\t\trequired = ( 'yes' === required ) ? ' required=\"required\"' : '';\n\n\t\t\t\tif ( 'select' === type ) {\n\n\t\t\t\t\tvar options = JSON.parse( $field.attr( 'data-llms-editable-options' ) ),\n\t\t\t\t\t\tselected;\n\n\t\t\t\t\t$input = $( '<select name=\"' + name + '\"' + required + ' />' );\n\t\t\t\t\tfor ( var key in options ) {\n\t\t\t\t\t\tselected = val === key ? ' selected=\"selected\"' : '';\n\t\t\t\t\t\t$input.append( '<option value=\"' + key + '\"' + selected + '>' + options[ key ] + '</option>' );\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( 'datetime' === type ) {\n\n\t\t\t\t\t$input = $( '<div class=\"llms-datetime-field\" />' );\n\n\t\t\t\t\tval          = JSON.parse( val );\n\t\t\t\t\tvar format   = $field.attr( 'data-llms-editable-date-format' ) || '',\n\t\t\t\t\t\tmin_date = $field.attr( 'data-llms-editable-date-min' ) || '',\n\t\t\t\t\t\tmax_date = $field.attr( 'data-llms-editable-date-max' ) || '';\n\n\t\t\t\t\t$picker = $( '<input class=\"llms-date-input llms-datepicker\" data-format=\"' + format + '\" data-max-date=\"' + max_date + '\" data-min-date=\"' + min_date + '\" name=\"' + name + '[date]\" type=\"text\" value=\"' + val.date + '\">' );\n\t\t\t\t\tself.bind_datepicker( $picker );\n\t\t\t\t\t$input.append( $picker );\n\t\t\t\t\t$input.append( '<em>@</em>' );\n\n\t\t\t\t\t$input.append( '<input class=\"llms-time-input\" max=\"23\" min=\"0\" name=\"' + name + '[hour]\" type=\"number\" value=\"' + val.hour + '\">' );\n\t\t\t\t\t$input.append( '<em>:</em>' );\n\t\t\t\t\t$input.append( '<input class=\"llms-time-input\" max=\"59\" min=\"0\" name=\"' + name + '[minute]\" type=\"number\" value=\"' + val.minute + '\">' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t$input = $( '<input name=\"' + name + '\" type=\"' + type + '\" value=\"' + val + '\"' + required + '>' );\n\t\t\t\t}\n\n\t\t\t\t$field.empty().append( $label ).append( $input );\n\t\t\t\tif ( 'select' === type ) {\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t$input.trigger( 'change' );\n\t\t\t\t\t}, 100 );\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\t$( 'a.llms-editable' ).on( 'click', function( e ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar $btn = $( this ),\n\t\t\t\t\t$fields;\n\n\t\t\t\tif ( $btn.attr( 'data-fields' ) ) {\n\t\t\t\t\t$fields = $( $btn.attr( 'data-fields' ) );\n\t\t\t\t} else {\n\t\t\t\t\t$fields = $btn.closest( '.llms-metabox-section' ).find( '[data-llms-editable]' );\n\t\t\t\t}\n\n\t\t\t\t$btn.remove();\n\n\t\t\t\t$fields.each( function() {\n\t\t\t\t\tmake_editable( $( this ) );\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t};\n\n\t\t/**\n\t\t * Bind Engagement post type JS\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.1.0\n\t\t * @version  3.1.0\n\t\t */\n\t\tthis.bind_llms_engagement = function() {\n\n\t\t\tvar self = this;\n\n\t\t\t// when the engagement type changes we need to do some things to the UI\n\t\t\t$( '#_llms_engagement_type' ).on( 'change', function() {\n\n\t\t\t\t$( '#_llms_engagement' ).trigger( 'llms-engagement-type-change', $( this ).val() );\n\n\t\t\t} );\n\n\t\t\t// custom trigger when called when the engagement type changes\n\t\t\t$( '#_llms_engagement' ).on( 'llms-engagement-type-change', function( e, engagement_type ) {\n\n\t\t\t\tvar $select = $( this );\n\n\t\t\t\tswitch ( engagement_type ) {\n\n\t\t\t\t\t/**\n\t\t\t\t\t * core engagements related to a CPT\n\t\t\t\t\t */\n\t\t\t\t\tcase 'achievement':\n\t\t\t\t\tcase 'certificate':\n\t\t\t\t\tcase 'email':\n\n\t\t\t\t\t\tvar cpt = 'llms_' + engagement_type;\n\n\t\t\t\t\t\t$select.val( null ).attr( 'data-post-type', cpt ).trigger( 'change' );\n\t\t\t\t\t\tself.post_select( $select );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Allow other plugins and developers to hook into the engagement type change action\n\t\t\t\t\t */\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t$select.trigger( 'llms-engagement-type-change-external', engagement_type );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t};\n\n\t\t/**\n\t\t * Actions for memberships\n\t\t *\n\t\t * @since 3.0.0\n\t\t * @since 3.30.0 Made autoenroll table sortable, added AJAX save for adding new courses.\n\t\t * @version 3.30.0\n\t\t *\n\t\t * @return   void\n\t\t */\n\t\tthis.bind_llms_membership = function() {\n\n\t\t\tvar $table = $( '.llms-mb-list._llms_content_table' );\n\n\t\t\t/**\n\t\t\t * Hide/Show empty message header row depending on the number of rows in the tbody\n\t\t\t *\n\t\t\t * @since 3.30.0\n\t\t\t * @version 3.30.0\n\t\t\t *\n\t\t\t * @return void\n\t\t\t */\n\t\t\tfunction toggle_header_row() {\n\n\t\t\t\tvar $rows = $table.find( 'tbody tr' );\n\t\t\t\tif ( 1 === $rows.length ) {\n\t\t\t\t\t$rows.first().show();\n\t\t\t\t} else {\n\t\t\t\t\t$rows.first().hide();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Retrieve an array of course IDs in the table.\n\t\t\t *\n\t\t\t * @since 3.30.0\n\t\t\t * @version 3.30.0\n\t\t\t *\n\t\t\t * @return array\n\t\t\t */\n\t\t\tfunction get_course_ids() {\n\n\t\t\t\tvar courses = [];\n\t\t\t\t$table.find( 'tbody tr a[href=\"#llms-course-remove\"]' ).each( function() {\n\t\t\t\t\tcourses.push( $( this ).attr( 'data-id' ) );\n\t\t\t\t} );\n\t\t\t\treturn courses;\n\n\t\t\t}\n\n\t\t\t// On init, toggle the header row visibility.\n\t\t\ttoggle_header_row();\n\n\t\t\t// remove auto-enroll course\n\t\t\t$table.on( 'click', 'a[href=\"#llms-course-remove\"]', function( e ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar $el        = $( this ),\n\t\t\t\t\t$row       = $el.closest( 'tr' ),\n\t\t\t\t\t$container = $el.closest( '.llms-mb-list' );\n\n\t\t\t\tLLMS.Spinner.start( $container );\n\n\t\t\t\twindow.LLMS.Ajax.call( {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'membership_remove_auto_enroll_course',\n\t\t\t\t\t\tcourse_id: $el.attr( 'data-id' ),\n\t\t\t\t\t},\n\t\t\t\t\tbeforeSend: function() {\n\n\t\t\t\t\t\t$container.find( 'p.error' ).remove();\n\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function( r ) {\n\n\t\t\t\t\t\tif ( r.success ) {\n\n\t\t\t\t\t\t\t$row.fadeOut( 200 );\n\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t$row.remove();\n\t\t\t\t\t\t\t\ttoggle_header_row();\n\t\t\t\t\t\t\t}, 400 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t$container.prepend( '<p class=\"error\">' + r.message + '</p>' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tLLMS.Spinner.stop( $container );\n\t\t\t\t\t},\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t\t// bulk enroll all members into a course\n\t\t\t$table.on( 'click', 'a[href=\"#llms-course-bulk-enroll\"]', function( e ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar $el        = $( this ),\n\t\t\t\t\t$row       = $el.closest( 'tr' ),\n\t\t\t\t\t$container = $el.closest( '.llms-mb-list' );\n\n\t\t\t\tif ( ! window.confirm( LLMS.l10n.translate( 'Click okay to enroll all active members into the selected course. Enrollment will take place in the background and you may leave your site after confirmation. This action cannot be undone!' ) ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tLLMS.Spinner.start( $container );\n\n\t\t\t\twindow.LLMS.Ajax.call( {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'bulk_enroll_membership_into_course',\n\t\t\t\t\t\tcourse_id: $el.attr( 'data-id' ),\n\t\t\t\t\t},\n\t\t\t\t\tbeforeSend: function() {\n\t\t\t\t\t\t$container.find( 'p.error' ).remove();\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function( r ) {\n\n\t\t\t\t\t\tif ( r.success ) {\n\n\t\t\t\t\t\t\t$el.replaceWith( '<strong style=\"float:right;\">' + r.data.message + '&nbsp;&nbsp;</strong>' );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t$container.prepend( '<p class=\"error\">' + r.message + '</p>' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tLLMS.Spinner.stop( $container );\n\t\t\t\t\t},\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t\t// Add an item to the autoenroll table on select.\n\t\t\t$( '#_llms_auto_enroll' ).on( 'change', function() {\n\n\t\t\t\tvar id    = $( this ).val(),\n\t\t\t\t\ttitle = $( this ).find( 'option[value=\"' + $( this ).val() + '\"]' ).text();\n\n\t\t\t\t// If there's no ID\n\t\t\t\tif ( ! id ) {\n\t\t\t\t\treturn;\n\t\t\t\t\t// Prevent Dupes.\n\t\t\t\t} else if ( -1 !== get_course_ids().indexOf( id ) ) {\n\n\t\t\t\t\talert( LLMS.l10n.replace( '\"%s\" is already in the course list.', { '%s': title } ) )\n\n\t\t\t\t\t// reset the select field.\n\t\t\t\t\t$( this ).val( '' ).trigger( 'change' );\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tvar $table = $( '.llms-mb-list._llms_content_table' );\n\t\t\t\t\t$tr    = $( '<tr />' );\n\n\t\t\t\t$tr.append( '<td><span class=\"llms-drag-handle\" style=\"color:#999;\"><i class=\"fa fa-ellipsis-v\" aria-hidden=\"true\" style=\"margin-right:2px;\"></i><i class=\"fa fa-ellipsis-v\" aria-hidden=\"true\"></i></span></td>' );\n\t\t\t\t$tr.append( '<td><a href=\"' + window.llms.admin_url + 'post.php?action=edit&post=' + id + '\">' + title + '</a></td>' );\n\t\t\t\t$tr.append( '<td><a class=\"llms-button-danger small\" data-id=\"' + id + '\" href=\"#llms-course-remove\" style=\"float:right;\">' + LLMS.l10n.translate( 'Remove course' ) + '</a><a class=\"llms-button-secondary small\" data-id=\"' + id + '\" href=\"#llms-course-bulk-enroll\" style=\"float:right;\">' + LLMS.l10n.translate( 'Enroll All Members' ) + '</a></td>' );\n\n\t\t\t\t// append the element to the table.\n\t\t\t\t$table.find( 'table tbody' ).append( $tr );\n\n\t\t\t\t// reset the select field.\n\t\t\t\t$( this ).val( '' ).trigger( 'change' );\n\n\t\t\t\t// Show the header row.\n\t\t\t\ttoggle_header_row();\n\n\t\t\t\t// trigger a save event.\n\t\t\t\t$table.trigger( 'llms-save-autoenroll-courses' );\n\n\t\t\t} );\n\n\t\t\t// Make autoenrollment table sortable.\n\t\t\t$table.find( 'table tbody' ).sortable( {\n\t\t\t\thandle: '.llms-drag-handle',\n\t\t\t\t// Save order on stop.\n\t\t\t\tstop: function( event, ui ) {\n\t\t\t\t\tui.item.closest( '.llms-mb-list' ).trigger( 'llms-save-autoenroll-courses' );\n\t\t\t\t},\n\t\t\t} );\n\n\t\t\t// Save courses & course order.\n\t\t\t$table.on( 'llms-save-autoenroll-courses', function() {\n\n\t\t\t\tvar $container = $( this );\n\n\t\t\t\tLLMS.Spinner.start( $container );\n\n\t\t\t\twindow.LLMS.Ajax.call( {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'llms_save_membership_autoenroll_courses',\n\t\t\t\t\t\tcourses: get_course_ids(),\n\t\t\t\t\t},\n\t\t\t\t\terror: function( jqxhr, code, error_msg ) {\n\t\t\t\t\t\talert( error_msg );\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tLLMS.Spinner.stop( $container );\n\t\t\t\t\t},\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t};\n\n\t\t/**\n\t\t * Actions for ORDERS\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.0.0\n\t\t * @version  3.28.0\n\t\t */\n\t\tthis.bind_llms_order = function() {\n\n\t\t\t$( 'button[name=\"llms-refund-toggle\"]' ).on( 'click', function() {\n\n\t\t\t\tvar $btn              = $( this ),\n\t\t\t\t\t$row              = $btn.closest( 'tr' ),\n\t\t\t\t\ttxn_id            = $row.attr( 'data-transaction-id' ),\n\t\t\t\t\trefundable_amount = $btn.attr( 'data-refundable' ),\n\t\t\t\t\tgateway_supports  = ( '1' === $btn.attr( 'data-gateway-supports' ) ) ? true : false,\n\t\t\t\t\tgateway_title     = $btn.attr( 'data-gateway' ),\n\t\t\t\t\t$new_row          = $( '#llms-txn-refund-model .llms-txn-refund-form' ).clone(),\n\t\t\t\t\t$gateway_btn      = $new_row.find( '.gateway-btn' );\n\n\t\t\t\t// configure and add the form\n\t\t\t\tif ( 'remove' !== $btn.attr( 'data-action' ) ) {\n\n\t\t\t\t\t$btn.text( LLMS.l10n.translate( 'Cancel' ) );\n\t\t\t\t\t$btn.attr( 'data-action', 'remove' );\n\t\t\t\t\t$new_row.find( 'input' ).removeAttr( 'disabled' );\n\t\t\t\t\t$new_row.find( 'input[name=\"llms_refund_amount\"]' ).attr( 'max', refundable_amount );\n\t\t\t\t\t$new_row.find( 'input[name=\"llms_refund_txn_id\"]' ).val( txn_id );\n\n\t\t\t\t\tif ( gateway_supports ) {\n\t\t\t\t\t\t$gateway_btn.find( '.llms-gateway-title' ).text( gateway_title );\n\t\t\t\t\t\t$gateway_btn.show();\n\t\t\t\t\t}\n\n\t\t\t\t\t$row.after( $new_row );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t$btn.text( LLMS.l10n.translate( 'Refund' ) );\n\t\t\t\t\t$btn.attr( 'data-action', '' );\n\t\t\t\t\t$row.next( 'tr' ).remove();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t$( 'button[name=\"llms-manual-txn-toggle\"]' ).on( 'click', function() {\n\n\t\t\t\tvar $btn     = $( this ),\n\t\t\t\t\t$row     = $btn.closest( 'tr' ),\n\t\t\t\t\t$new_row = $( '#llms-manual-txn-model .llms-manual-txn-form' ).clone();\n\n\t\t\t\t// configure and add the form\n\t\t\t\tif ( 'remove' !== $btn.attr( 'data-action' ) ) {\n\n\t\t\t\t\t$btn.text( LLMS.l10n.translate( 'Cancel' ) );\n\t\t\t\t\t$btn.attr( 'data-action', 'remove' );\n\t\t\t\t\t$new_row.find( 'input' ).removeAttr( 'disabled' );\n\n\t\t\t\t\t$row.after( $new_row );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t$btn.text( LLMS.l10n.translate( 'Record a Manual Payment' ) );\n\t\t\t\t\t$btn.attr( 'data-action', '' );\n\t\t\t\t\t$row.next( 'tr' ).remove();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t// cache the original value when focusing on a payment gateway select\n\t\t\t// used below so the original field related data can be restored when switching back to the originally selected gateway\n\t\t\t$( '.llms-metabox' ).one( 'focus', '.llms-metabox-field[data-llms-editable=\"payment_gateway\"] select', function() {\n\n\t\t\t\tif ( ! $( this ).attr( 'data-original-value' ) ) {\n\t\t\t\t\t$( this ).attr( 'data-original-value', $( this ).val() );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t// when selecting a new payment gateway get field data and update the dom to only display the fields\n\t\t\t// supported/needed by the newly selected gateway\n\t\t\t$( '.llms-metabox' ).on( 'change', '.llms-metabox-field[data-llms-editable=\"payment_gateway\"] select', function() {\n\n\t\t\t\tvar $select      = $( this ),\n\t\t\t\t\tgateway      = $select.val(),\n\t\t\t\t\tdata         = JSON.parse( $select.closest( '.llms-metabox-field' ).attr( 'data-gateway-fields' ) ),\n\t\t\t\t\tgateway_data = data[ gateway ];\n\n\t\t\t\tfor ( var field in gateway_data ) {\n\n\t\t\t\t\tvar $field = $( 'input[name=\"' + gateway_data[ field ].name + '\"]' ),\n\t\t\t\t\t\t$wrap  = $field.closest( '.llms-metabox-field' );\n\n\t\t\t\t\t// if the field is enabled show it the field and, if we're switching back to the originally selected\n\t\t\t\t\t// gateway, reload the value from the dom\n\t\t\t\t\tif ( gateway_data[ field ].enabled ) {\n\n\t\t\t\t\t\t$wrap.show();\n\t\t\t\t\t\t$field.attr( 'required', 'required' );\n\t\t\t\t\t\t$field.removeAttr( 'disabled' );\n\n\t\t\t\t\t\tif ( gateway === $select.attr( 'data-original-value' ) ) {\n\t\t\t\t\t\t\t$field.val( $wrap.attr( 'data-llms-editable-value' ) );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// otherwise hide the field\n\t\t\t\t\t\t// this will ensure it gets updated in the database\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// always clear the value when switching\n\t\t\t\t\t\t// ensures that outdated data is removed from the DB\n\t\t\t\t\t\t$field.attr( 'value', '' );\n\n\t\t\t\t\t\t$field.removeAttr( 'required' );\n\t\t\t\t\t\t// $field.attr( 'disabled', 'disabled' );\n\t\t\t\t\t\t$wrap.hide();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t};\n\n\t\t/**\n\t\t * Binds custom llms merge code buttons\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.1.0\n\t\t * @version  3.9.2\n\t\t */\n\t\tthis.bind_merge_code_buttons = function( $wrappers ) {\n\n\t\t\t$wrappers = $wrappers || $( '.llms-merge-code-wrapper' );\n\n\t\t\t$wrappers.find( '.llms-merge-code-button' ).on( 'click', function() {\n\n\t\t\t\t$( this ).next( '.llms-merge-codes' ).toggleClass( 'active' );\n\n\t\t\t} );\n\n\t\t\t$wrappers.find( '.llms-merge-codes li' ).on( 'click', function() {\n\n\t\t\t\tvar $el     = $( this ),\n\t\t\t\t\t$parent = $el.closest( '.llms-merge-codes' ),\n\t\t\t\t\ttarget  = $parent.attr( 'data-target' ),\n\t\t\t\t\tcode    = $el.attr( 'data-code' );\n\n\t\t\t\t// dealing with a tinymce instance\n\t\t\t\tif ( -1 === target.indexOf( '#' ) ) {\n\n\t\t\t\t\tvar editor = window.tinymce.editors[ target ];\n\t\t\t\t\tif ( editor ) {\n\t\t\t\t\t\teditor.insertContent( code );\n\t\t\t\t\t} // fallback in case we can't access the editor directly\n\t\t\t\t\telse {\n\t\t\t\t\t\talert( LLMS.l10n.translate( 'Copy this code and paste it into the desired area' ) + ': ' + code );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t// dealing with a DOM id\n\t\t\t\telse {\n\n\t\t\t\t\t$( target ).val( $( target ).val() + code );\n\n\t\t\t\t}\n\n\t\t\t\t$parent.removeClass( 'active' );\n\n\t\t\t} );\n\n\t\t};\n\n\t\t/**\n\t\t * Bind metabox tabs\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.0.0\n\t\t * @version  3.0.0\n\t\t */\n\t\tthis.bind_tabs = function() {\n\t\t\t$( '.llms-nav-tab-wrapper .tabs li' ).on( 'click', function() {\n\n\t\t\t\tvar $btn     = $( this ),\n\t\t\t\t\t$metabox = $btn.closest( '.llms-mb-container' ),\n\t\t\t\t\ttab_id   = $btn.attr( 'data-tab' );\n\n\t\t\t\t$btn.siblings().removeClass( 'llms-active' );\n\n\t\t\t\t$metabox.find( '.tab-content' ).removeClass( 'llms-active' );\n\n\t\t\t\t$btn.addClass( 'llms-active' );\n\t\t\t\t$( '#' + tab_id ).addClass( 'llms-active' );\n\n\t\t\t} );\n\t\t};\n\n\t\t/**\n\t\t * Enable WP Post Table searches for applicable select2 boxes\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.0.0\n\t\t * @version  3.21.0\n\t\t */\n\t\tthis.post_select = function( $el ) {\n\n\t\t\tvar multi = 'multiple' === $el.attr( 'multiple' );\n\n\t\t\t$el.llmsPostsSelect2( {\n\t\t\t\twidth: multi ? '100%' : '65%',\n\t\t\t} );\n\n\t\t\tif ( multi || $el.attr( 'data-no-view-button' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// add a \"View\" button to see what the selected page looks like\n\t\t\tvar msg  = LLMS.l10n.translate( 'View' ),\n\t\t\t\t$btn = $( '<a class=\"llms-button-secondary small\" style=\"margin-left:5px;\" target=\"_blank\" href=\"#\">' + msg + ' <i class=\"fa fa-external-link\" aria-hidden=\"true\"></i></a>' );\n\t\t\t$el.next( '.select2' ).after( $btn );\n\n\t\t\t$el.on( 'change', function() {\n\t\t\t\tvar id = $( this ).val();\n\t\t\t\tif ( id ) {\n\t\t\t\t\t$btn.attr( 'href', '/?p=' + id ).show();\n\t\t\t\t} else {\n\t\t\t\t\t$btn.hide();\n\t\t\t\t}\n\t\t\t} ).trigger( 'change' );\n\n\t\t};\n\n\t\t/**\n\t\t * Bind dom events for .llms-tables\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.0.0\n\t\t * @version  3.0.0\n\t\t */\n\t\tthis.bind_tables = function() {\n\n\t\t\t$( '.llms-table button[name=\"llms-expand-table\"]' ).on( 'click', function() {\n\n\t\t\t\tvar $btn   = $( this ),\n\t\t\t\t\t$table = $btn.closest( '.llms-table' )\n\n\t\t\t\t// switch the text on the button if alt text is found\n\t\t\t\tif ( $btn.attr( 'data-text' ) ) {\n\t\t\t\t\tvar text = $btn.text();\n\t\t\t\t\t$btn.text( $btn.attr( 'data-text' ) );\n\t\t\t\t\t$btn.attr( 'data-text', text );\n\t\t\t\t}\n\n\t\t\t\t// switch classes on all expandable elements\n\t\t\t\t$table.find( '.expandable' ).each( function() {\n\n\t\t\t\t\tif ( $( this ).hasClass( 'closed' ) ) {\n\t\t\t\t\t\t$( this ).addClass( 'opened' ).removeClass( 'closed' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$( this ).addClass( 'closed' ).removeClass( 'opened' );\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t};\n\n\t\t// go\n\t\tthis.init();\n\n\t};\n\n\t// initialize the object\n\twindow.llms.metaboxes = new Metaboxes();\n\n} )( jQuery );\n\n//# sourceMappingURL=../maps/js/llms-metaboxes.js.map\n"],"sourceRoot":"../../js"}